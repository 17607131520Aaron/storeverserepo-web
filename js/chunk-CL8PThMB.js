import{i as e}from"./chunk-Dh7eWoLx.js";import{F as n,M as t,j as r,y as o}from"./chunk-CitY_U0d.js";import{x as a}from"./chunk-DOrKQl7X.js";t();const c=()=>{const e=()=>{if("undefined"==typeof window||!window.performance)return null;const e=performance.getEntriesByType("navigation")[0];if(!e)return null;const n={dnsTime:e.domainLookupEnd-e.domainLookupStart,tcpTime:e.connectEnd-e.connectStart,requestTime:e.responseEnd-e.requestStart,domParseTime:e.domInteractive-e.responseEnd,domContentLoadedTime:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,loadTime:e.loadEventEnd-e.loadEventStart,totalTime:e.loadEventEnd-e.fetchStart,fcp:0,lcp:0,fid:0,cls:0};performance.getEntriesByType("paint").forEach(e=>{"first-contentful-paint"===e.name&&(n.fcp=e.startTime)});const t=performance.getEntriesByName("largest-contentful-paint");return t.length>0&&(n.lcp=t[t.length-1].startTime),n};return{getPerformanceMetrics:e,logPagePerformance:n=>{const t=e();if(!t)return;t.fcp,t.lcp;const o=r(r({},t),{},{url:"undefined"!=typeof window&&window.location?window.location.href:"",timestamp:Date.now(),pageId:n});try{null}catch(c){}a(o)}}};var i=c,s=e(n(),1),d=o(),m=({id:e,children:n,onRender:t,enableConsoleLog:r=!0})=>{const o=(0,s.useRef)(!1),a=(0,s.useRef)(!1),{logPagePerformance:c}=i(),m=s.Profiler;(0,s.useEffect)(()=>{o.current=!1,a.current=!1},[e]);return(0,d.jsx)(m,{id:e,onRender:(n,i,s,d,m,f)=>{const u=new Set;if(t&&t(n,i,s,d,m,f),r&&!o.current&&("mount"===i||"update"===i)){u.size,a.current||(a.current=!0,c(e)),o.current=!0}},children:n})};export{c as n,m as t};