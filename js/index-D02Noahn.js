import{i as e}from"./chunk-Dh7eWoLx.js";import{A as r,M as t,N as n,O as o,_ as s,j as i,k as a,v as c,y as d}from"./chunk--OXHFPkF.js";import{C as l,S as u,T as f,b as p,w as m,x as h,y as g}from"./chunk-DCg2CaxM.js";import{r as y,t as v,u as j,ut as x}from"./chunk-B_MG0jMH.js";import{n as k}from"./chunk-J2gituLC.js";import"./chunk-bmmvJARN.js";import{t as w}from"./chunk-CWTLan4S.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var b=c(),E=e(n(),1);const S=(A=o(function*(e){try{yield f(e)}catch(r){}}),function(e){return A.apply(this,arguments)});var A;const L=(N=o(function*(e){return yield l(e)}),function(e){return N.apply(this,arguments)});var N;C=o(function*(){yield u()});var C;O=o(function*(){return yield m()});var O;R=o(function*(e){return(yield L(e)).map(e=>e.payload)});var R;r();var P=!1,D=function(){var e=o(function*(e){yield S(e)});return function(r){return e.apply(this,arguments)}}(),F=e=>{try{return"string"==typeof e?e:JSON.stringify(e)}catch(r){return String(e)}};const I=function(){var e=o(function*(e){const r=(e=>{const r="undefined"!=typeof window&&window.location?window.location.href:"N/A",t="undefined"!=typeof navigator?navigator.userAgent:"N/A";return a(a({},e),{},{url:r,userAgent:t,timestamp:Date.now()})})(e);try{yield D(r)}catch(t){}});return function(r){return e.apply(this,arguments)}}();var M=s();t();var z=class extends E.Component{constructor(...e){super(...e),i(this,"state",{hasError:!1,message:""}),i(this,"handleRetry",()=>{this.setState({hasError:!1,message:""})})}static getDerivedStateFromError(e){return{hasError:!0,message:String((null==e?void 0:e.message)||"未知错误")}}componentDidCatch(e,r){I({type:"react-render",scope:this.props.scope||"App",message:(null==e?void 0:e.message)||"组件渲染异常",stack:null==e?void 0:e.stack,componentStack:r.componentStack||void 0})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,M.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:12,color:"#1f1f1f",background:"#f5f5f5"},children:[(0,M.jsx)("div",{style:{fontSize:18,fontWeight:600},children:"页面出错了"}),(0,M.jsx)("div",{style:{color:"#8c8c8c"},children:this.state.message||"请稍后重试"}),(0,M.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,M.jsx)("button",{style:{padding:"8px 16px",borderRadius:6,border:"1px solid #1677ff",background:"#1677ff",color:"#fff",cursor:"pointer"},onClick:()=>window.location.reload(),children:"刷新页面"}),(0,M.jsx)("button",{style:{padding:"8px 16px",borderRadius:6,border:"1px solid #d9d9d9",background:"#fff",color:"#595959",cursor:"pointer"},onClick:this.handleRetry,children:"重试"})]})]}):this.props.children}},T=({children:e})=>((0,E.useEffect)(()=>{const e=(()=>{if("undefined"==typeof window||P)return;P=!0;const e=e=>{var r;I({type:"runtime-error",message:e.message,stack:null===(r=e.error)||void 0===r?void 0:r.stack,filename:e.filename,lineno:e.lineno,colno:e.colno,extra:{error:F(e.error)}})},r=e=>{const r=e.reason;I({type:"unhandled-rejection",message:(null==r?void 0:r.message)||F(r)||"Unhandled rejection",stack:null==r?void 0:r.stack,extra:{reason:F(r)}})};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",r),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",r),P=!1}})();return()=>{e&&e()}},[]),(0,M.jsx)(M.Fragment,{children:e})),q=()=>(0,M.jsx)("div",{className:"loading-fallback",children:(0,M.jsx)(j,{spinning:!0,size:"large",tip:"页面加载中...",children:(0,M.jsx)("div",{className:"loading-fallback-placeholder"})})}),B=({children:e})=>{const{logPagePerformance:r}=k();return(0,E.useEffect)(()=>{const e=()=>{setTimeout(()=>{r()},1e3)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>{window.removeEventListener("load",e)};e()},[r]),(0,M.jsx)(M.Fragment,{children:e})},H=e(v(),1),J=({children:e})=>{const{theme:r}=g(),[t,n]=(0,E.useState)(p());return(0,E.useEffect)(()=>{const e=()=>{n(p())};e();const r=new MutationObserver(()=>{e()});return r.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>{r.disconnect()}},[r]),(0,M.jsx)(x,{locale:H.default,theme:{algorithm:"dark"===t?y.darkAlgorithm:y.defaultAlgorithm},children:e})};h(),(0,b.createRoot)(document.getElementById("root")).render((0,M.jsx)(T,{children:(0,M.jsx)(z,{scope:"AppRoot",children:(0,M.jsx)(J,{children:(0,M.jsx)(B,{children:(0,M.jsx)(E.Suspense,{fallback:(0,M.jsx)(q,{}),children:(0,M.jsx)(d,{router:w})})})})})}));