import{i as e}from"./chunk-Dh7eWoLx.js";import{A as r,F as n,M as t,N as o,P as s,c as i,j as a,o as c,x as d}from"./chunk-DRz1mV9D.js";import{J as l,s as u,t as f}from"./chunk-DgmtKtlG.js";import"./chunk-Cd6TlBs2.js";import{n as p}from"./chunk-DNUzPS6a.js";import{t as m}from"./chunk-BGLISbjF.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var h=e(f(),1),g=i(),v=e(n(),1);t();var y=!1,x=e=>{try{return"string"==typeof e?e:JSON.stringify(e)}catch(r){return String(e)}};const j=(k=r(function*(e){(e=>{const r="undefined"!=typeof window&&window.location?window.location.href:"N/A",n="undefined"!=typeof navigator?navigator.userAgent:"N/A";a(a({},e),{},{url:r,userAgent:n,timestamp:Date.now()})})(e);try{yield}catch(r){}}),function(e){return k.apply(this,arguments)});var k;var w=c();s();var b=class extends v.Component{constructor(...e){super(...e),o(this,"state",{hasError:!1,message:""}),o(this,"handleRetry",()=>{this.setState({hasError:!1,message:""})})}static getDerivedStateFromError(e){return{hasError:!0,message:String((null==e?void 0:e.message)||"未知错误")}}componentDidCatch(e,r){j({type:"react-render",scope:this.props.scope||"App",message:(null==e?void 0:e.message)||"组件渲染异常",stack:null==e?void 0:e.stack,componentStack:r.componentStack||void 0})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,w.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:12,color:"#1f1f1f",background:"#f5f5f5"},children:[(0,w.jsx)("div",{style:{fontSize:18,fontWeight:600},children:"页面出错了"}),(0,w.jsx)("div",{style:{color:"#8c8c8c"},children:this.state.message||"请稍后重试"}),(0,w.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,w.jsx)("button",{style:{padding:"8px 16px",borderRadius:6,border:"1px solid #1677ff",background:"#1677ff",color:"#fff",cursor:"pointer"},onClick:()=>window.location.reload(),children:"刷新页面"}),(0,w.jsx)("button",{style:{padding:"8px 16px",borderRadius:6,border:"1px solid #d9d9d9",background:"#fff",color:"#595959",cursor:"pointer"},onClick:this.handleRetry,children:"重试"})]})]}):this.props.children}},E=({children:e})=>((0,v.useEffect)(()=>{const e=(()=>{if("undefined"==typeof window||y)return;y=!0;const e=e=>{var r;j({type:"runtime-error",message:e.message,stack:null===(r=e.error)||void 0===r?void 0:r.stack,filename:e.filename,lineno:e.lineno,colno:e.colno,extra:{error:x(e.error)}})},r=e=>{const r=e.reason;j({type:"unhandled-rejection",message:(null==r?void 0:r.message)||x(r)||"Unhandled rejection",stack:null==r?void 0:r.stack,extra:{reason:x(r)}})};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",r),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",r),y=!1}})();return()=>{e&&e()}},[]),(0,w.jsx)(w.Fragment,{children:e})),S=()=>(0,w.jsx)("div",{className:"loading-fallback",children:(0,w.jsx)(u,{spinning:!0,size:"large",tip:"页面加载中...",children:(0,w.jsx)("div",{className:"loading-fallback-placeholder"})})}),L=({children:e})=>{const{logPagePerformance:r}=p();return(0,v.useEffect)(()=>{const e=()=>{setTimeout(()=>{r()},1e3)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>{window.removeEventListener("load",e)};e()},[r]),(0,w.jsx)(w.Fragment,{children:e})};(0,g.createRoot)(document.getElementById("root")).render((0,w.jsx)(E,{children:(0,w.jsx)(b,{scope:"AppRoot",children:(0,w.jsx)(l,{locale:h.default,children:(0,w.jsx)(L,{children:(0,w.jsx)(v.Suspense,{fallback:(0,w.jsx)(S,{}),children:(0,w.jsx)(d,{router:m})})})})})}));